(()=>{var o={n:t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},d:(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};(()=>{"use strict";o.r(t);const e=flarum.core.compat["forum/app"];var r=o.n(e);const n=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/UserPage"];var s=o.n(a);const c=flarum.core.compat["common/components/LinkButton"];var i=o.n(c);function u(o,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,t){return o.__proto__=t,o},u(o,t)}function p(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,u(o,t)}const l=flarum.core.compat["common/components/LoadingIndicator"];var y=o.n(l);const f=flarum.core.compat["common/utils/extractText"];var d=o.n(f);const h=flarum.core.compat["common/Component"];var v=o.n(h);const b=flarum.core.compat["common/helpers/icon"];var w=o.n(b),g=function(o){function t(){return o.apply(this,arguments)||this}return p(t,o),t.prototype.view=function(){var o=this.attrs;return o.money,o.showReceiver,m("li.MoneyRewardRecord",[m("span.MoneyRewardRecordIcon",w()("fas fa-gift"))])},t}(v()),O=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))||this).loading=!0,t.money=[],t}p(t,o);var e=t.prototype;return e.oninit=function(t){o.prototype.oninit.call(this,t),this.loadUser(m.route.param("username"))},e.show=function(t){o.prototype.show.call(this,t),r().setTitle(d()(r().translator.trans("wanecho-money-tip.forum.profile.title"))),this.loadRewards()},e.loadRewards=function(){var o=this;r().request({method:"GET",url:r().forum.attribute("apiUrl")+"/users/"+this.user.id()+"/money/history"}).then((function(t){o.money=r().store.pushPayload(t),o.loading=!1,m.redraw()}))},e.content=function(){return this.loading?y().component():m("ul.MoneyHistoryPage.MoneyHistoryRecords",[this.money.map((function(o){return g.component({reward:o,showReceiver:!0})}))])},t}(s());r().initializers.add("flarum-ext-money-history",(function(){r().routes.userMoneyHistory={path:"/u/:username/money/history",component:O},(0,n.extend)(s().prototype,"navItems",(function(o){r().session.user&&o.add("money-history",i().component({href:r().route("userMoneyHistory",{username:r().session.user.username()}),icon:"fas fa-money-bill"},r().translator.trans("mattoid-money-history.forum.nav")))}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map